<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>zen3d - earth</title>
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<style>
		#controls {
			width: 50%;
		}		
		#view {
			position: fixed;
			top: 0;
			right: 0;
			width: 50%;
			height: 100%;
		}
	</style>
	<script src="../../../ext/zen3d/zen3d.js"></script>
	<script src="../../../ext/zen3d/controls/OrbitControls.js"></script>
	<script src="../../../ext/zen3d/objects/Sprite.js"></script>
	<script src="earth3d.js"></script>
</head>
<body>
	<div id="controls">
		<div>
			<label>Lat: </label>
			<input type="text" id="lat" value="45"/>
		</div>
		<div>
			<label>Lng: </label>
			<input type="text" id="lng" value="45"/>
		</div>	
		<button onclick="setLatLng()">Update</button>		
		<hr/>

		<div>
			<label>Opacity: </label>
			<input type="text" id="opacity" value="50"/>
		</div>		
		<button onclick="setOpacity()">Update</button>		
		<hr/>

		<div>
			<label>Rotation angle: </label>
			<input type="text" id="rotation-angle" value="0"/>
		</div>		
		<button onclick="updateRotation()">Update</button>		
		<hr/>		

		<strong>mouseover coordinates</strong>
		<div id="coordinates"></div>			
	</div>

	
	<div id="view"></div>	
	

	<script>
		function getValue(id, min, max) {
			var el = document.getElementById(id);
			var v = Math.floor(el.value) || 0;
			v = Math.min(v, max);
			v = Math.max(v, min);
			el.value = v;
			return v;
		}

		function updateCursor() {
			earth.setCursor({
				lat: getValue('lat', -90, 90), 
				lng: getValue('lng', -180, 180)
			});
		}

		function updateOpacity() {
			earth.setOpacity(
				getValue('opacity', 0, 100) / 100
			);
		}

		function updateRotation() {
			earth.setRotation(
				Math.PI * getValue('rotation-angle', -Infinity, Infinity) / 180
			);			
		}

		var earth = Earth3D({
			parent: document.getElementById('view'),

			// initial position of cursor, if false then cursor is hidden. optional
			cursor: {
				lat: 20,
				lng: 20
			},
			// points and labels, optional
			labels: [
				{
					text: 'Label text 1',
					lat: 54.326967,
					lng: 48.4237641					
				},
				{
					text: 'Label text 2',
					lat: 25,
					lng: 40	
				},				
				{
					text: 'Label text 3',
					lat: -5,
					lng: 20
				},								
			],
			// grid steps for lat and lng, optinal
			grid: {
				lat: 15,
				lng: 30
			},
			// initial camera position, optional
			camera: {
				lat: 30,
				lng: 30
			},
			// all evens are optional
			events: {
				onLoad: function() {
					updateCursor();
					updateOpacity();
					updateRotation();					
				},
				onMouseMove: function(point) {
					var lat_postfix = (lat < 0) ? 'S' : 'N';
					var lng_postfix = (lng < 0) ? 'W' : 'E';
					document.getElementById('coordinates').innerHTML = 
						'Lat: ' + point.lat + lat_postfix +
						' Lng: ' + point.lng + lng_postfix;
				}
			}
		});		
	</script>
</body>
</html>